---
date: 2020-02-03
title: HTTP 가이드 03
description: "http 학습"
template: posts
status: published
categories:
  - web programming
tags:
  - programming
  - web
---

## URL과 리소스

URL은 인터넷의 리소스를 가리키는 표준 이름이다.

### URL 문법

```
<scheme>://<사용자이름>:<비밀번호>@<host>:<port>/<path>;<parameter>?<query>#<fragment>
```

- scheme: 리소스를 가져오려면 어떤 프로토콜을 사용해 서버에 접근해야 하는지 가리킨다.
- host: 리소스를 호스팅하는 서버의 호스트 명이나 IP 주소
- port: 리소스를 호스팅하는 서버가 열어놓은 포트 번호. 대부분의 scheme은 기본 포트를 갖고 있다.
- path: 리소스가 서버 어디에 있는지를 가리킨다.
- parameter: 특정 scheme에서 입력 파라미터를 기술하는 용도를 사용한다
- query: scheme에서 애플리케이션에 파라미터를 전달하는데 쓰인다.
- fragment: 리소스의 조각이나 일부분을 가리키는 이름이다. URL이 특정 객체를 가리킬 경우에 프래그먼트 필드는 서버에 전달되지 않는다. 이는 클라이언트에서만 사용한다.

### scheme의 예

|스킴|설명|
|---|---|
|http|사용자 이름이나 비밀번호가 없다는 것을 제외하고는, 일반 URL 포맷을 지키는 하이퍼텍스트 전송 프로토콜 스킴이다. 포트값이 생략되어 있으면 기본값은 80이다.|
|https|http와의 차이점은 HTTP의 커넥션의 양 끝다에서 암호화하기 위해 넷스케이프에서 개발한 보안 소켓 계층(Secure Sockets Layer, SSL)을 사용한다는 것이다.|
|mailto|mailto URL은 이메일 주소를 가리킨다.|

## HTTP 메시지

### 메서드

#### GET

서버에게 리소스를 요청하는 경우

#### HEAD

GET 처럼 행동하지만, 서버는 응답으로 헤더만을 돌려준다. 엔터티 본문은 반환되지 않는다. 서버 개발자들은 반드시 반환되는 헤더가 GET으로 얻는 것과 정확히 일치함을 보장해야 한다.

- 리소스를 가져오지 않고도 그에 대해 무엇인가를 알아낼 수 있다.
- 응답의 상태 코드를 통해, 개체가 존재하는지 확인할 수 있다.
- 헤더를 확인하여 리소스가 변경되었는지 검사할 수 있다.

#### PUT

GET 메서드가 서버로부터 문서를 읽어 들이는데 반해 PUT 메서드는 서버에 문서를 쓴다. PUT 메서드의 의미는, 서버가 요청의 본문을 가지고 요청 URL의 이름대로 새 문서를 만들거나, 이미 URL이 존재한다면 본문을 사용해서 교체하는 것이다.

#### POST

POST 메서드는 서버에 입력 데이터를 전송하기 위해 설계되었다. 

#### TRACE

클라이언트가 어떤 요청을 할 때, 그 요청은 방화벽, 프락시, 게이트웨이 등의 애플케이션을 통과할 수 있다. TRACE 메서드는 클라이언트에게 자신의 요청이 서버에 도달했을 때 어떻게 보이게 되는지 알려준다.

#### OPTIONS

OPTIONS 메서드는 웹 서버에게 여러 가지 종류의 지원 범위에 대해 물어본다. 서버에게 특정 리소스에 대해 어떤 메서드가 지원되는지 물어볼 수 있다.

#### DELETE

서버에게 요청 URL로 지정한 리소스를 삭제할 것을 요청한다.

### 헤더

#### 일반 헤더

클라이언트와 서버 양쪽 모두가 가능하다. 이들은 다양한 목적으로 사용된다. 예를 들어, Date 헤더는 서버와 클라이언트를 가리지 않고 메시지가 만들어진 일시를 지칭하기 위해 사용하는 일반 목적 헤더이다.

```sh
Connection: 클라이언트와 서버가 요청/응답 연결에 대한 옵션을 정할 수 있게 해준다.
Date: 메시지가 언제 만들어졌는지에 대한 날짜와 시간을 제공
MIME-Version: 발송자가 사용한 MIME 버전 알려준다
Cache-Control: 메시지와 함께 캐시 지시자를 전달하기 위해 사용
```

#### 요청 헤더

요청헤더는 요청 메시지를 위한 헤더이다. 서버에게 클라이언트가 받고자 하는 데이터의 타입이 무엇인지와 같은 부가 정보를 제공한다, 예를 들어 Accept 헤더는 서버에게 클라이언트가 자신의 요청에 대응하는 어떤 미디어 타입도 받아들일 것임을 의미한다.

```sh
User-Agent: 요청을 보낸 애플리케이션의 이름
Accept: 서버에게 서버가 보내도 되는 미디어 종류를 말해준다
Authoization: 클라이언트가 서버에게 제공하는 인증 그 자체에 대한 정보
Cookie: 클라이언트가 서버에게 토큰을 전달할 때 사용.
```

#### 응답 헤더

응답 메시지는 클라이언트에게 정보를 제공하기 위한 자시만의 헤더를 갖고 있다. 클라이언트에게 부가 정보를 제공한다.

```sh
Server: 서버 애플리케이션의 이름과 버전
```

#### 엔티티 헤더

엔티티 본문에 대한 헤더를 말한다. 엔티티 헤더는 엔티티 본문에 들어있는 데이터 타입이 무엇인지를 말해줄 수 있다.

```sh
Content-Type: text/html
```

## 커넥션 관리

### TCP 커넥션

전 세계 모든 HTTP 통신은 지구상의 컴퓨터와 네트워크 장비에서 널리 쓰이고 있는 패킷 교환 네트워크 프로토콜들의 계층화된 집합인 TCP/IP를 통해 이루어진다. 일단 커넥션이 맺어지면 클라이언트와 서버 컴퓨터 간에 주고받는 메시지들은 손실 혹은 손상되거나 순서가 바뀌지 않고 안전하게 전달된다. URL을 입력 받은 브라우저는 다음과 같은 단계를 수행한다.

1. 브라우저가 호스트명을 추출한다.
2. 호스트명에 대한 IP 주소를 찾는다.
3. 브라우저가 포트 번호를 얻는다.
4. 브라우저가 IP주소 및 포트 번호에 대한 TCP 커넥션을 생성한다.
5. 브라우저가 서버로 HTTP GET 요청을 보낸다.
6. 브라우저가 서버에서 온 HTTP 응답 메시지를 읽는다.
7. 브라우저가 커넥션을 끊는다.

#### 신뢰 가능한 데이터 전송 통로 TCP

TCP는 HTTP에게 신뢰할 만한 통신 방식을 제공한다. TCP 커넥션의 한쪽에 있는 바이트들은 반대쪽으로 순서에 맞게 정확히 전달된다.

#### TCP 스트림은 세그먼트로 나뉘어 IP 패킷을 통해 전송된다

TCP는 IP패킷이라고 불리는 작은 조각을 통해 데이터를 전송한다. HTTP가 메시지를 전송하고자 할 경우, 현재 연결되어 있는 TCP 커넥션을 통해서 메시지 데이터의 내용을 순서대로 보낸다. TCP는 세그먼트라는 단위로 데이터 스트림을 잘게 나누고, 세그먼트를 IP 패킷이라고 불리는 봉투에 담아서 인터넷을 통해 데이터를 전달한다.

<div class="reference__md">
[참고]<br />
HTTP 완벽 가이드, 데이빗 고울리 저, 인사이트
</div>